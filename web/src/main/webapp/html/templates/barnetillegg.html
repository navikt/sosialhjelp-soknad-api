<div class="skjemaramme" data-ng-controller="ModusCtrl" data-scroll-tilbake-directive="barnetillegg">
    <div id="barnetilleggForm" data-ng-form="barnetilleggForm" class="skjemainnhold" data-ng-controller="BarnetilleggCtrl" novalidate>

        <p class="informasjonstekst" cmstekster="barnetillegg.informasjon"></p>
        <div class="spm-boks vertikal" data-ng-repeat="b in barn">
            <div data-ng-class="{gutt: erGutt(b), jente:erJente(b)}" id="barnetillegg{{b.faktumId}}" class="barn">
                <a href="#" class="lukk" data-ng-show="erBrukerregistrert(b)" data-ng-click="slettBarn(b, $index, $event)" data-fokus-slettmoduler="barnetillegg"> </a>

                <div class="barnealder">
                    <span data-cmstekster="aar"></span>
                    <span class="alder robust" data-ng-bind="b.properties.alder"></span>
                </div>
                <div class="barneinfo">
                    <div data-ng-bind="b.properties.sammensattnavn"></div>
                    <div data-ng-bind="b.properties.fnr"></div>
                    <div>{{ b.properties.fodselsdato | date:'dd.MM.yyyy'}}</div>
                    <div class="barnbosted">
                        <span class="bosted">bosted: </span>
                        <span data-ng-show="ingenLandRegistrert(b)">Norge</span>
                        <span data-ng-bind="b.properties.land"></span>
                    </div>
                </div>
                <div class="barnecheckbox" data-ng-controller="BarnetilleggFaktumCtrl">
                    <div data-ng-if="hvisIRedigeringsmodus()">
                        <div data-ng-show="erSystemRegistrert(b)">
                            <a href data-ng-click="sokbarnetillegg(b.faktumId, $event)" data-cmstekster="barnetillegg.barnetilegg.sporsmal" data-ng-if="barnetilleggIkkeRegistrert()"></a>
                            <a href="#" data-ng-if="barnetilleggErRegistrert()" data-ng-click="slettBarnetillegg(b.faktumId, $index, $event)" data-cmstekster="barnetillegg.slettbarnetillegg" data-fokus-slettmoduler="barnetillegg"></a>
                        </div>
                    </div>

                    <div data-ng-if="barnetilleggErRegistrert()">
                        <p class="svar-oppsummering" data-cmstekster="barnetillegg.barnetilegg.sporsmal"></p>

                        <p class="svar-oppsummering" data-ng-if="barnetHarIkkeInntekt()" data-cmstekster="barnetillegg.barnetilegg.ikkebarneinntekt.true"></p>

                        <p class="svar-oppsummering" data-ng-if="barnetHarInntekt()">
                            <span data-cmstekster="barnetillegg.barnetilegg.ikkebarneinntekt.false"> </span>
                            <span>.</span>
                            <span data-cmstekster="barnetillegg.barnetilegg.barneinntekttall.sporsmal"></span>
                            <span data-ng-bind="barneinntekttall.value | currency"></span>
                        </p>
                    </div>
                </div>
                <div class="sentrert" data-ng-show="erBrukerregistrert(b)">
                    <ul class="liste-vannrett">
                        <li>
                            <a href="#" data-ng-click="slettBarn(b, $index, $event)" data-cmstekster="barnetillegg.slettbarn" data-fokus-slettmoduler="barnetillegg"></a>
                        </li>
                        <li>
                            <a href="#" data-ng-click="endreBarn(b.faktumId, $event)" data-cmstekster="barnetillegg.endrebarn"></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="knapper-opprett" id="legg-til-barn" data-ng-show="hvisIRedigeringsmodus()">
            <p data-cmstekster="barnetillegg.nyttbarn.informasjon"></p>
            <button class="knapp-leggtil-liten" href="#/nyttbarn" data-ng-click="leggTilBarn($event)" data-cmstekster="barnetillegg.nyttbarn"></button>
        </div>

        <div spmblokkferdig
             nokkel="barnetillegg"
             modus="data.redigeringsModus"
             submit-method="validerOgSettModusOppsummering(barnetilleggForm)"></div>
    </div>
</div>

