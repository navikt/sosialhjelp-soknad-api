fragment metadata on Metadata {
    master
    endringer {
        kilde
        registrert
        registrertAv
        systemkilde
        type
    }
}

fragment folkeregistermetadata on Folkeregistermetadata {
    ajourholdstidspunkt
    gyldighetstidspunkt
    opphoerstidspunkt
    kilde
}

query($ident: ID!, $historikk: Boolean!) {
    hentPerson(ident: $ident) {
        adressebeskyttelse(historikk: $historikk) {
            gradering
        }
        bostedsadresse(historikk: $historikk) {
            coAdressenavn
            vegadresse {
                matrikkelId
                adressenavn
                husnummer
                husbokstav
                tilleggsnavn
                postnummer
                kommunenummer
                bruksenhetsnummer
            }
            matrikkeladresse {
                matrikkelId
                postnummer
                tilleggsnavn
                kommunenummer
                bruksenhetsnummer
            }
            ukjentBosted {
                bostedskommune
            }
        }
        foedsel {
            foedselsdato
        }
        navn(historikk: $historikk) {
            fornavn
            mellomnavn
            etternavn
            metadata {
                ...metadata
            }
            folkeregistermetadata{
                ...folkeregistermetadata
            }
        }
    }
}